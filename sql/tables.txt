CREATE TABLE customers (
    firstName           VARCHAR(20) NOT NULL, 
    lastName            VARCHAR(20) NOT NULL, 
    phoneNumber         VARCHAR(20), 
    mailAddress         VARCHAR(50), 
    deliveryAddress     VARCHAR(50), 
    CONSTRAINT customers_pk PRIMARY KEY (firstName, lastName) 
);

CREATE TABLE employees (
    eID                 INT NOT NULL,
    firstName           VARCHAR(20) NOT NULL, 
    lastName            VARCHAR(20) NOT NULL, 
    phoneNumber         VARCHAR(20) NOT NULL, 
    address             VARCHAR(50) NOT NULL, 
    salary              INT NOT NULL, 
    commissionRate      INT NOT NULL, 
    totalCommission     INT NOT NULL, 
    CONSTRAINT employees_pk PRIMARY KEY (eID)
);


CREATE TABLE orders (
    orderNumber     INT NOT NULL,
    firstName       VARCHAR(20) NOT NULL, 
    lastName        VARCHAR(20) NOT NULL, 
    delivery        VARCHAR(1) NOT NULL, 
    orderDate       DATE NOT NULL,
    orderTime       TIME NOT NULL,
    salesRepID      INT NOT NULL, 
--     balance         INT NOT NULL, ---- This is a derivable attribute
    CONSTRAINT orders_pk PRIMARY KEY (orderNumber), 
    CONSTRAINT orders_fk1 FOREIGN KEY (firstName, lastName) REFERENCES customers (firstName, lastName), 
    CONSTRAINT orders_fk2 FOREIGN KEY (salesRepID) REFERENCES employees (eID)
);


CREATE TABLE orderDetails (
    orderNumber     INTEGER NOT NULL, 
    productName     VARCHAR(20) NOT NULL, 
    quantity        INT NOT NULL, 
    priceEach       DECIMAL(10,2) NOT NULL, -- quantity x items (MSRP)
    CONSTRAINT orderDetails_pk PRIMARY KEY (orderNumber, productName), 
    CONSTRAINT orderDetails_fk FOREIGN KEY (orderNumber) REFERENCES orders (orderNumber)
);

CREATE TABLE products (
    productNumber       INT NOT NULL, 
    productName         VARCHAR(20) NOT NULL, 
    MSRP                DECIMAL(10, 2) NOT NULL, 
    buyPrice            DECIMAL(10, 2) NOT NULL, 
    quantityInStock     INT NOT NULL, 
    profit              DECIMAL(10, 2) NOT NULL, 
    CONSTRAINT products_pk PRIMARY KEY (productNumber)
);

-- For testing
insert into employees (eID,firstName,lastName,phoneNumber,address,salary,commissionRate,totalCommission) 
values (1, 'Some', 'Employee', '234-342-2349', '234 test road', 45, 2, 3);